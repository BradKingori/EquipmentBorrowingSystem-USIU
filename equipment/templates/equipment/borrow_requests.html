{% extends 'equipment/base.html' %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<body>
  {% block pagecontent %}

<section class="sample-page">
  <div class="container-fluid px-3" data-aos="fade-up" data-aos-delay="100">
    <div class="row">
      <div class="col-12">

        <div style="
          background: #4E73DF;
          border-radius: 10px;
          box-shadow: 0 4px 20px rgba(0,0,0,0.15);
          padding: 25px;
          color: #fff;
          margin: 15px;
        ">

          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h4 style="margin: 0;">Borrow Requests</h4>
            <input type="text" placeholder="Search..." style="
              padding: 8px 35px;
              border-radius: 20px;
              border: none;
              outline: none;
              width: 250px;
            ">
          </div>

          <div style="overflow-x: auto;">
            <table style="
              width: 100%;
              border-collapse: separate;
              border-spacing: 0 8px;
              background-color: transparent;
            ">
              <thead>
                <tr style="background-color: rgba(255,255,255,0.2); text-align: left;">
                  <th style="padding: 12px;">Student Name</th>
                  <th style="padding: 12px;">Equipment</th>
                  <th style="padding: 12px;">Date</th>
                  <th style="padding: 12px;">Lecturer</th>
                  <th style="padding: 12px;">HOD</th>
                  <th style="padding: 12px;">Technician</th>
                  <th style="padding: 12px;">Approved</th>
                </tr>
              </thead>
              <tbody>
                {% for borrow_request in borrow_requests %}
                <tr style="background-color: rgba(255,255,255,0.05);">
                  <td style="padding: 10px;">{{ borrow_request.student.fullname }}</td>
                  <td style="padding: 10px;">{{ borrow_request.equipment.name }}</td>
                  <td style="padding: 10px;">{{ borrow_request.requested_at }}</td>

                  {% comment "Status Badge Macro" %}
                  {% macro status_badge(status) %}
                    {% if status == True %}
                      <span style="padding: 4px 10px; background-color: #28a745; color: white; border-radius: 12px; font-size: 12px;">Approved</span>
                    {% elif status == False %}
                      <span style="padding: 4px 10px; background-color: #dc3545; color: white; border-radius: 12px; font-size: 12px;">Rejected</span>
                    {% else %}
                      <span style="padding: 4px 10px; background-color: #6c757d; color: white; border-radius: 12px; font-size: 12px;">Pending</span>
                    {% endif %}
                  {% endmacro %}
                  {% endcomment %}

                  <td style="padding: 10px;">
                    {% if borrow_request.lecturer_approved == True %}
                      <span style="padding: 4px 10px; background-color: #28a745; color: white; border-radius: 12px;">Approved</span>
                    {% elif borrow_request.lecturer_approved == False %}
                      <span style="padding: 4px 10px; background-color: #dc3545; color: white; border-radius: 12px;">Rejected</span>
                    {% else %}
                      <span style="padding: 4px 10px; background-color: #6c757d; color: white; border-radius: 12px;">Pending</span>
                    {% endif %}
                  </td>

                  <td style="padding: 10px;">
                    {% if borrow_request.hod_approved == True %}
                      <span style="padding: 4px 10px; background-color: #28a745; color: white; border-radius: 12px;">Approved</span>
                    {% elif borrow_request.hod_approved == False %}
                      <span style="padding: 4px 10px; background-color: #dc3545; color: white; border-radius: 12px;">Rejected</span>
                    {% else %}
                      <span style="padding: 4px 10px; background-color: #6c757d; color: white; border-radius: 12px;">Pending</span>
                    {% endif %}
                  </td>

                  <td style="padding: 10px;">
                    {% if borrow_request.tech_approved == True %}
                      <span style="padding: 4px 10px; background-color: #28a745; color: white; border-radius: 12px;">Approved</span>
                    {% elif borrow_request.tech_approved == False %}
                      <span style="padding: 4px 10px; background-color: #dc3545; color: white; border-radius: 12px;">Rejected</span>
                    {% else %}
                      <span style="padding: 4px 10px; background-color: #6c757d; color: white; border-radius: 12px;">Pending</span>
                    {% endif %}
                  </td>

                  <td style="padding: 10px;">
                    {% if borrow_request.fully_approved == True %}
                      <span style="padding: 4px 10px; background-color: #28a745; color: white; border-radius: 12px;">Approved</span>
                    {% elif borrow_request.fully_approved == False %}
                      <span style="padding: 4px 10px; background-color: #dc3545; color: white; border-radius: 12px;">Rejected</span>
                    {% else %}
                      <span style="padding: 4px 10px; background-color: #6c757d; color: white; border-radius: 12px;">Pending</span>
                    {% endif %}
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>

          <div style="margin-top: 20px; display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 14px;">Showing {{ borrow_requests|length }} out of 25 entries</span>
            <div>
              <button style="background: none; border: none; color: #fff; font-size: 18px; cursor: pointer;">&lt;</button>
              <button style="background: #fff; color: #4E73DF; padding: 6px 12px; border-radius: 50%; border: none; margin: 0 5px;">1</button>
              <button style="background: none; border: none; color: #fff; font-size: 18px; cursor: pointer;">2</button>
              <button style="background: none; border: none; color: #fff; font-size: 18px; cursor: pointer;">&gt;</button>
            </div>
          </div>

        </div>

      </div>
    </div>
  </div>
</section>

{% endblock %}
</body>
</html>
